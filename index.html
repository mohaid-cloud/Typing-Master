<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typing-Master-Pro</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, rgba(252, 255, 58, 0.925), #00ff11, #0400ff);
            color: #fff;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
            opacity: 0;
            animation: fadeIn 1s ease forwards;
        brightness(1.1);

        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            transform: translateY(20px);
            animation: slideUp 0.8s ease forwards;
        }
        
        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 25px;
            animation: fadeIn 1s ease 0.3s forwards;
            opacity: 0;
        }
        
        .logo {
            font-size: 28px;
            font-weight: bold;
            color: #a5d6a7;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
        }
        
        .logo:hover {
            transform: scale(1.05);
            color: #c8e6c9;
        }
        
        .logo i {
            font-size: 32px;
            transition: transform 0.5s ease;
        }
        
        .logo:hover i {
            transform: rotate(10deg);
        }
        
        .nav-buttons {
            display: flex;
            gap: 15px;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            transform: translateY(0);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .btn-primary {
            background-color: #a74cafbe;
            color: white;
        }
        
        .btn-secondary {
            background-color: transparent;
            border: 2px solid #a74cafbe;
            color: whitesmoke;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 14px rgba(0, 0, 0, 0.2);
        }
        
        .btn:active {
            transform: translateY(1px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .progress-section {
            background-color: rgba(255, 255, 255, 0.15);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            animation: fadeIn 1s ease 0.4s forwards;
            opacity: 0;
        }
        
        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .progress-title {
            font-size: 22px;
            font-weight: bold;
        }
        
        .progress-bar {
            height: 25px;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 15px;
            position: relative;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .progress-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #a74cafbe, #8bc34a);
            border-radius: 12px;
            transition: width 1s cubic-bezier(0.22, 0.61, 0.36, 1);
            position: relative;
            overflow: hidden;
        }
        
        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background-image: linear-gradient(
                -45deg, 
                rgba(255, 255, 255, 0.2) 25%, 
                transparent 25%, 
                transparent 50%, 
                rgba(255, 255, 255, 0.2) 50%, 
                rgba(255, 255, 255, 0.2) 75%, 
                transparent 75%, 
                transparent
            );
            z-index: 1;
            background-size: 50px 50px;
            animation: move 2s linear infinite;
            border-radius: 12px;
            overflow: hidden;
        }
        
        @keyframes move {
            0% { background-position: 0 0; }
            100% { background-position: 50px 50px; }
        }
        
        .level {
            font-size: 18px;
            color: #a5d6a7;
            margin-bottom: 5px;
        }
        
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            animation: fadeIn 1s ease 0.5s forwards;
            opacity: 0;
        }
        
        .tab {
            padding: 12px 25px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            transform: translateY(0);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .tab:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 14px rgba(0, 0, 0, 0.2);
            background-color: rgba(255, 255, 255, 0.15);
        }
        
        .tab.active {
            background-color: #a74cafbe;
            box-shadow: 0 7px 14px rgba(0, 0, 0, 0.2);
            transform: translateY(-3px);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(76, 175, 80, 0); }
            100% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0); }
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease forwards;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .modules {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .module {
            background-color: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            transform: translateY(0);
            animation: fadeIn 1s ease 0.6s forwards;
            opacity: 0;
        }
        
        .module:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        
        .module:nth-child(1) { animation-delay: 0.6s; }
        .module:nth-child(2) { animation-delay: 0.7s; }
        .module:nth-child(3) { animation-delay: 0.8s; }
        
        .module-title {
            font-size: 20px;
            margin-bottom: 15px;
            color: #708371;
            border-bottom: 2px solid #a74cafbe;
            padding-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .lesson-list {
            list-style-type: none;
        }
        
        .lesson-item {
            padding: 12px 15px;
            margin-bottom: 10px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
            transform: translateX(0);
            animation: slideInRight 0.5s ease forwards;
            opacity: 0;
        }
        
        @keyframes slideInRight {
            from { transform: translateX(20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .lesson-item:nth-child(1) { animation-delay: 0.1s; }
        .lesson-item:nth-child(2) { animation-delay: 0.2s; }
        .lesson-item:nth-child(3) { animation-delay: 0.3s; }
        .lesson-item:nth-child(4) { animation-delay: 0.4s; }
        .lesson-item:nth-child(5) { animation-delay: 0.5s; }
        
        .lesson-item:hover {
            background-color: rgba(255, 255, 255, 0.2);
            transform: translateX(5px);
        }
        
        .start-btn {
            padding: 6px 15px;
            background-color: #a74cafbe;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            transform: scale(1);
        }
        
        .start-btn:hover {
            transform: scale(1.1);
            background-color: #f6fa00be;
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
            animation: fadeIn 1s ease 0.9s forwards;
            opacity: 0;
        }
        
        .stat-card {
            background-color: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            transition: all 0.3s ease;
            transform: translateY(0);
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        .stat-value {
            font-size: 32px;
            font-weight: bold;
            color: #a74cafbe;
            margin: 10px 0;
            transition: all 0.5s ease;
        }
        
        .stat-card:hover .stat-value {
            transform: scale(1.2);
            color: #66bb6a;
        }
        
        .stat-label {
            font-size: 16px;
            color: #a5d6a7;
        }
        
        .problem-keys {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
        }
        
        .key {
            padding: 10px 15px;
            background-color: #ff5722;
            border-radius: 5px;
            font-weight: bold;
            transition: all 0.3s ease;
            transform: scale(1);
            animation: bounce 1s infinite alternate;
        }
        
        @keyframes bounce {
            from { transform: translateY(0); }
            to { transform: translateY(-5px); }
        }
        
        .key:nth-child(1) { animation-delay: 0.1s; }
        .key:nth-child(2) { animation-delay: 0.2s; }
        .key:nth-child(3) { animation-delay: 0.3s; }
        .key:nth-child(4) { animation-delay: 0.4s; }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 2px solid rgba(255, 255, 255, 0.2);
            color: #a5d6a7;
            animation: fadeIn 1s ease 1s forwards;
            opacity: 0;
        }
        
        /* Typing Lesson Styles */
        .typing-lesson {
            background-color: rgba(255, 255, 255, 0.15);
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
            animation: fadeIn 0.5s ease forwards;
        }
        
        .lesson-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .lesson-title {
            font-size: 24px;
            color: #a5d6a7;
            animation: pulse 2s infinite;
        }
        
        .lesson-stats {
            display: flex;
            gap: 20px;
        }
        
        .stat {
            text-align: center;
        }
        
        .stat span {
            display: block;
            font-size: 18px;
            font-weight: bold;
            color: #a74cafbe;
            transition: all 0.3s ease;
        }
        
        .stat span.value-updated {
            animation: pop 0.5s ease;
        }
        
        @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.3); }
            100% { transform: scale(1); }
        }
        
        .text-display {
            background-color: rgba(0, 0, 0, 0.2);
            padding: 20px;
            border-radius: 8px;
            font-size: 22px;
            line-height: 1.6;
            margin-bottom: 20px;
            min-height: 150px;
            transition: all 0.3s ease;
        }
        
        .current-word {
            background-color: #a74cafbe;
            padding: 2px 5px;
            border-radius: 4px;
            animation: highlight 1.5s infinite alternate;
        }
        
        @keyframes highlight {
            from { background-color: #a74cafbe; }
            to { background-color: #66bb6a; }
        }
        
        .input-area {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        #typing-input {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            background-color: rgba(255, 255, 255, 0.9);
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        #typing-input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.5);
            transform: translateY(-2px);
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
        }
        
        .result {
            text-align: center;
            margin-top: 20px;
            display: none;
            animation: fadeIn 0.5s ease forwards;
        }
        
        .keyboard {
            margin-top: 30px;
            background-color: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            animation: slideInUp 0.5s ease forwards;
        }
        
        @keyframes slideInUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .keyboard-row {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-bottom: 5px;
        }
        
        .keyboard-key {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #333;
            color: white;
            border-radius: 5px;
            font-weight: bold;
            transition: all 0.1s ease;
            box-shadow: 0 4px 0 #222;
        }
        
        .keyboard-key:active {
            transform: translateY(4px);
            box-shadow: 0 0 0 #222;
        }
        
        .keyboard-key.space {
            width: 300px;
        }
        
        .keyboard-key.shift {
            width: 100px;
            background-color: #666;
        }
        
        .keyboard-key.active {
            background-color: #a74cafbe;
            transform: translateY(4px);
            box-shadow: 0 0 0 #222;
        }
        
        .keyboard-key.shift-active {
            background-color: #ff9800;
        }
        
        .shift-instruction {
            text-align: center;
            margin-top: 15px;
            padding: 10px;
            background-color: rgba(255, 152, 0, 0.2);
            border-radius: 5px;
            font-size: 16px;
            animation: fadeIn 0.5s ease;
        }
        
        .shift-instruction i {
            color: #ff9800;
            margin-right: 5px;
        }
        
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background-color: #f0f;
            opacity: 0;
            pointer-events: none;
        }
        
        @media (max-width: 768px) {
            .modules {
                grid-template-columns: 1fr;
            }
            
            .stats {
                grid-template-columns: 1fr;
            }
            
            header {
                flex-direction: column;
                gap: 15px;
            }
            
            .keyboard-key {
                width: 30px;
                height: 30px;
                font-size: 12px;
            }
            
            .keyboard-key.space {
                width: 150px;
            }
            
            .keyboard-key.shift {
                width: 70px;
                font-size: 11px;
            }
            
            .tabs {
                flex-wrap: wrap;
            }
            
            .lesson-header {
                flex-direction: column;
                gap: 15px;
            }
            
            .lesson-stats {
                justify-content: center;
            }
        }
        #speed-challenge-btn, #accuracy-tips-btn {
            margin: 5px;
        }
        
        .speed-mode {
            border: 2px solid #ff9800;
            box-shadow: 0 0 10px rgba(255, 152, 0, 0.5);
        }
        
        .accuracy-mode {
            border: 2px solid #4caf50;
            box-shadow: 0 0 10px rgba(76, 175, 80, 0.5);
        }
        
        .speed-mode.active, .accuracy-mode.active {
            background-color: rgba(255, 152, 0, 0.1);
        }
        
        .accuracy-tips {
            display: none;
            background-color: rgba(76, 175, 80, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
        }
        
        .accuracy-tips.active {
            display: block;
        }
        
        #formatting-options {
            margin: 15px 0;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
        }
        
        #error-report, #certification-success, #certification-failure {
            margin: 20px 0;
            padding: 15px;
            border-radius: 5px;
        }
        
        #certification-success {
            background: rgba(76, 175, 80, 0.2);
        }
        
        #certification-failure {
            background: rgba(255, 87, 34, 0.2);
        }
        
        .active-certification {
            background-color: #ff9800 !important;
            border-color: #ff9800 !important;
        }
        
        #keyboard-layout {
            padding: 8px;
            border-radius: 5px;
            background: #333;
            color: white;
            border: none;
            margin-left: 10px;
        }
        
        .test-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .test-card {
            background-color: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .test-card:hover {
            transform: translateY(-5px);
            background-color: rgba(255, 255, 255, 0.15);
        }
        
        .test-card i {
            font-size: 40px;
            color: #a5d6a7;
            margin-bottom: 15px;
        }
        
        .test-card h3 {
            margin-bottom: 10px;
            color: #a5d6a7;
        }
        
        .typing-test {
            background-color: rgba(255, 255, 255, 0.15);
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .test-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .test-title {
            font-size: 24px;
            color: #a5d6a7;
        }
        
        .test-stats {
            display: flex;
            gap: 20px;
        }
        
        .test-stat {
            text-align: center;
            background-color: rgba(0, 0, 0, 0.2);
            padding: 10px 15px;
            border-radius: 8px;
            min-width: 100px;
        }
        
        .test-stat span {
            display: block;
            font-size: 18px;
            font-weight: bold;
            color: #4caf50;
        }
        
        .test-text-display {
            background-color: rgba(0, 0, 0, 0.2);
            padding: 20px;
            border-radius: 8px;
            font-size: 22px;
            line-height: 1.6;
            margin-bottom: 20px;
            min-height: 150px;
        }
        
        .current-word {
            background-color: #4caf50;
            padding: 2px 5px;
            border-radius: 4px;
        }
        
        .test-input-area {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        #test-typing-input {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            background-color: rgba(255, 255, 255, 0.9);
        }
        
        .test-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
        }
        
        .test-result {
            text-align: center;
            margin-top: 20px;
            padding: 20px;
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            display: none;
        }
        
        .result-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .result-stat {
            text-align: center;
            padding: 15px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
        }
        
        .result-value {
            font-size: 32px;
            font-weight: bold;
            color: #4caf50;
            margin: 10px 0;
        }
        
        .result-label {
            font-size: 16px;
            color: #a5d6a7;
        }
        
        .history {
            margin-top: 40px;
        }
        
        .history h2 {
            margin-bottom: 20px;
            color: #a5d6a7;
            text-align: center;
        }
        
        .history-table {
            width: 100%;
            border-collapse: collapse;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .history-table th, .history-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .history-table th {
            background-color: rgba(0, 0, 0, 0.2);
            color: #a5d6a7;
        }
        
        .history-table tr:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }
        
        .progress-ring {
            transform: rotate(-90deg);
        }
        
        .progress-circle {
            transition: stroke-dashoffset 0.5s ease;
        }
    </style>
</head>
<body>

    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-keyboard"></i>
                <span>typing.com</span>
            </div>
            <div class="logo">
                <i class="fas fa-graduation-cap"></i>
                <span>Learn to Type</span>
            </div>
        </header>
        
        <div class="progress-section">
            <div class="progress-header">
                <div class="progress-title">Learn to Type</div>
                <div>Print Unit Certificate</div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <div class="level">Current Level: <span id="current-level">Beginner</span></div>
            <p>Create a free account to save your progress!</p>
        </div>
        
        <div class="tabs">
            <div class="tab active" data-tab="beginner">Beginner</div>
            <div class="tab" data-tab="intermediate">Intermediate</div>
            <div class="tab" data-tab="advanced">Advanced</div>
            <div class="tab" data-tab="tests">Typing Tests</div>
            <div class="tab" data-tab="history">History</div>
        </div>
        
        <div class="tab-content active" id="beginner-content">
            <div class="modules">
                <div class="module">
                    <h2 class="module-title">
                        <i class="fas fa-play-circle"></i>
                        Basic Keys
                    </h2>
                    <ul class="lesson-list">
                        <li class="lesson-item">
                            <span>1. J, F, and Space</span>
                            <button class="start-btn" onclick="startLesson(1, 'beginner')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>2. U, R, and K Keys</span>
                            <button class="start-btn" onclick="startLesson(2, 'beginner')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>3. D, E, and I Keys</span>
                            <button class="start-btn" onclick="startLesson(3, 'beginner')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>4. C, G, and N Keys</span>
                            <button class="start-btn" onclick="startLesson(4, 'beginner')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>5. Shift Key Introduction</span>
                            <button class="start-btn" onclick="startLesson(5, 'beginner')">Start</button>
                        </li>
                    </ul>
                </div>
                
                <div class="module">
                    <h2 class="module-title">
                        <i class="fas fa-flag-checkered"></i>
                        Shift Key Practice
                    </h2>
                    <ul class="lesson-list">
                        <li class="lesson-item">
                            <span>6. Capital Letters: A-G</span>
                            <button class="start-btn" onclick="startLesson(6, 'beginner')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>7. Capital Letters: H-N</span>
                            <button class="start-btn" onclick="startLesson(7, 'beginner')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>8. Capital Letters: O-U</span>
                            <button class="start-btn" onclick="startLesson(8, 'beginner')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>9. Capital Letters: V-Z</span>
                            <button class="start-btn" onclick="startLesson(9, 'beginner')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>10. Simple Sentences</span>
                            <button class="start-btn" onclick="startLesson(10, 'beginner')">Start</button>
                        </li>
                    </ul>
                </div>
                
                <div class="module">
                    <h2 class="module-title">
                        <i class="fas fa-trophy"></i>
                        Wrapping Up
                    </h2>
                    <ul class="lesson-list">
                        <li class="lesson-item">
                            <span>11. Basic Punctuation</span>
                            <button class="start-btn" onclick="startLesson(11, 'beginner')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>12. Names and Places</span>
                            <button class="start-btn" onclick="startLesson(12, 'beginner')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>13. Simple Paragraphs</span>
                            <button class="start-btn" onclick="startLesson(13, 'beginner')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>14. Beginner Wrap-up</span>
                            <button class="start-btn" onclick="startLesson(14, 'beginner')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>15. Beginner Assessment</span>
                            <button class="start-btn" onclick="startLesson(15, 'beginner')">Start</button>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="intermediate-content">
            <div class="modules">
                <div class="module">
                    <h2 class="module-title">
                        <i class="fas fa-chart-line"></i>
                        Building Speed
                    </h2>
                    <ul class="lesson-list">
                        <li class="lesson-item">
                            <span>1. Common Word Patterns</span>
                            <button class="start-btn" onclick="startLesson(1, 'intermediate')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>2. Frequently Used Words</span>
                            <button class="start-btn" onclick="startLesson(2, 'intermediate')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>3. Short Sentences with Capitals</span>
                            <button class="start-btn" onclick="startLesson(3, 'intermediate')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>4. Speed Drills with Shift</span>
                            <button class="start-btn" onclick="startLesson(4, 'intermediate')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>5. Intermediate Review 1</span>
                            <button class="start-btn" onclick="startLesson(5, 'intermediate')">Start</button>
                        </li>
                    </ul>
                </div>
                
                <div class="module">
                    <h2 class="module-title">
                        <i class="fas fa-running"></i>
                        Building Accuracy
                    </h2>
                    <ul class="lesson-list">
                        <li class="lesson-item">
                            <span>6. Accuracy Drills with Capitals</span>
                            <button class="start-btn" onclick="startLesson(6, 'intermediate')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>7. Common Phrases with Punctuation</span>
                            <button class="start-btn" onclick="startLesson(7, 'intermediate')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>8. Punctuation Practice</span>
                            <button class="start-btn" onclick="startLesson(8, 'intermediate')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>9. Number Row with Shift</span>
                            <button class="start-btn" onclick="startLesson(9, 'intermediate')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>10. Intermediate Review 2</span>
                            <button class="start-btn" onclick="startLesson(10, 'intermediate')">Start</button>
                        </li>
                    </ul>
                </div>
                
                <div class="module">
                    <h2 class="module-title">
                        <i class="fas fa-bolt"></i>
                        Speed & Accuracy Combo
                    </h2>
                    <ul class="lesson-list">
                        <li class="lesson-item">
                            <span>11. Timed Sentences with Capitals</span>
                            <button class="start-btn" onclick="startLesson(11, 'intermediate')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>12. Paragraph Practice</span>
                            <button class="start-btn" onclick="startLesson(12, 'intermediate')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>13. Error Reduction</span>
                            <button class="start-btn" onclick="startLesson(13, 'intermediate')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>14. Intermediate Wrap-up</span>
                            <button class="start-btn" onclick="startLesson(14, 'intermediate')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>15. Intermediate Assessment</span>
                            <button class="start-btn" onclick="startLesson(15, 'intermediate')">Start</button>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="advanced-content">
            <div class="modules">
                <div class="module">
                    <h2 class="module-title">
                        <i class="fas fa-rocket"></i>
                        Advanced Techniques
                    </h2>
                    <ul class="lesson-list">
                        <li class="lesson-item">
                            <span>1. Complex Word Patterns</span>
                            <button class="start-btn" onclick="startLesson(1, 'advanced')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>2. Technical Vocabulary with Capitals</span>
                            <button class="start-btn" onclick="startLesson(2, 'advanced')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>3. Speed Challenges with Symbols</span>
                            <button class="start-btn" onclick="startLesson(3, 'advanced')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>4. Accuracy Mastery with Shift</span>
                            <button class="start-btn" onclick="startLesson(4, 'advanced')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>5. Advanced Review 1</span>
                            <button class="start-btn" onclick="startLesson(5, 'advanced')">Start</button>
                        </li>
                    </ul>
                </div>
                
                <div class="module">
                    <h2 class="module-title">
                        <i class="fas fa-medal"></i>
                        Professional Level
                    </h2>
                    <ul class="lesson-list">
                        <li class="lesson-item">
                            <span>6. Business Correspondence</span>
                            <button class="start-btn" onclick="startLesson(6, 'advanced')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>7. Legal Terminology</span>
                            <button class="start-btn" onclick="startLesson(7, 'advanced')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>8. Medical Terminology</span>
                            <button class="start-btn" onclick="startLesson(8, 'advanced')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>9. Technical Documentation</span>
                            <button class="start-btn" onclick="startLesson(9, 'advanced')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>10. Advanced Review 2</span>
                            <button class="start-btn" onclick="startLesson(10, 'advanced')">Start</button>
                        </li>
                    </ul>
                </div>
                
                <div class="module">
                    <h2 class="module-title">
                        <i class="fas fa-graduation-cap"></i>
                        Mastery Level
                    </h2>
                    <ul class="lesson-list">
                        <li class="lesson-item">
                            <span>11. Transcription Practice</span>
                            <button class="start-btn" onclick="startLesson(11, 'advanced')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>12. Speed Typing Tests with Symbols</span>
                            <button class="start-btn" onclick="startLesson(12, 'advanced')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>13. Error-Free Typing with Capitals</span>
                            <button class="start-btn" onclick="startLesson(13, 'advanced')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>14. Advanced Wrap-up</span>
                            <button class="start-btn" onclick="startLesson(14, 'advanced')">Start</button>
                        </li>
                        <li class="lesson-item">
                            <span>15. Advanced Certification</span>
                            <button class="start-btn" onclick="startLesson(15, 'advanced')">Start</button>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="tests-content">
            <h2 style="text-align: center; margin-bottom: 20px; color: #a5d6a7;">Typing Tests</h2>
            <p style="text-align: center; margin-bottom: 30px;">Test your typing speed and accuracy with various challenges</p>
            <div class="test-options">
                <div class="test-card" onclick="startTest(1, '1-minute')">
                    <i class="fas fa-stopwatch"></i>
                    <h3>1-Minute Test</h3>
                    <p>Test your speed in a quick 1-minute typing challenge</p>
                </div>
                <div class="test-card" onclick="startTest(3, '3-minute')">
                    <i class="fas fa-hourglass-half"></i>
                    <h3>3-Minute Test</h3>
                    <p>Challenge yourself with a longer typing test</p>
                </div>
                <div class="test-card" onclick="startTest(5, '5-minute')">
                    <i class="fas fa-stopwatch-20"></i>
                    <h3>5-Minute Test</h3>
                    <p>The ultimate test of endurance and speed</p>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="history-content">
            <div class="history">
                <h2>Test History</h2>
                <div class="table-container" style="overflow-x: auto;">
                    <table class="history-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Test Type</th>
                                <th>WPM</th>
                                <th>Accuracy</th>
                                <th>Time</th>
                                <th>Errors</th>
                            </tr>
                        </thead>
                        <tbody id="history-table-body">
                            </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <div class="typing-lesson" id="typing-lesson">
            <div class="lesson-header">
                <div class="lesson-info">
                    <h2 class="lesson-title" id="lesson-title"></h2>
                    <p id="lesson-description" style="margin-top: 5px;"></p>
                </div>
                <div class="lesson-stats">
                    <div class="stat">
                        <label>WPM</label>
                        <span id="wpm-display">0</span>
                    </div>
                    <div class="stat">
                        <label>Accuracy</label>
                        <span id="accuracy-display">0%</span>
                    </div>
                    <div class="stat">
                        <label>Time</label>
                        <span id="timer-display">0s</span>
                    </div>
                    <div class="stat">
                        <label>Errors</label>
                        <span id="errors-display">0</span>
                    </div>
                </div>
            </div>
            
            <div class="text-display" id="text-display"></div>
            
            <div class="input-area">
                <input type="text" id="typing-input" placeholder="Start typing here..." autocomplete="off" autofocus>
            </div>
            
            <div class="controls">
                <button class="btn btn-primary" id="start-btn-lesson">Restart</button>
                <button class="btn btn-secondary" id="end-btn-lesson">End Lesson</button>
            </div>
            
            <div class="result" id="result">
                <h3>Lesson Complete!</h3>
                <div class="stats">
                    <div class="stat-card">
                        <div class="stat-value" id="final-wpm"></div>
                        <div class="stat-label">Words Per Minute</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="final-accuracy"></div>
                        <div class="stat-label">Accuracy</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="final-errors"></div>
                        <div class="stat-label">Errors</div>
                    </div>
                </div>
                <div id="error-report" style="display: none; color: #ff5722; text-align: left;">
                    <h4>Problem Keys:</h4>
                    <div class="problem-keys" id="problem-keys-display"></div>
                </div>
            </div>
            
            <div class="keyboard" id="keyboard">
                <div class="keyboard-row">
                    <div class="keyboard-key">`</div>
                    <div class="keyboard-key">1</div>
                    <div class="keyboard-key">2</div>
                    <div class="keyboard-key">3</div>
                    <div class="keyboard-key">4</div>
                    <div class="keyboard-key">5</div>
                    <div class="keyboard-key">6</div>
                    <div class="keyboard-key">7</div>
                    <div class="keyboard-key">8</div>
                    <div class="keyboard-key">9</div>
                    <div class="keyboard-key">0</div>
                    <div class="keyboard-key">-</div>
                    <div class="keyboard-key">=</div>
                    <div class="keyboard-key">Backspace</div>
                </div>
                <div class="keyboard-row">
                    <div class="keyboard-key">Tab</div>
                    <div class="keyboard-key">q</div>
                    <div class="keyboard-key">w</div>
                    <div class="keyboard-key">e</div>
                    <div class="keyboard-key">r</div>
                    <div class="keyboard-key">t</div>
                    <div class="keyboard-key">y</div>
                    <div class="keyboard-key">u</div>
                    <div class="keyboard-key">i</div>
                    <div class="keyboard-key">o</div>
                    <div class="keyboard-key">p</div>
                    <div class="keyboard-key">[</div>
                    <div class="keyboard-key">]</div>
                    <div class="keyboard-key">\</div>
                </div>
                <div class="keyboard-row">
                    <div class="keyboard-key">Caps Lock</div>
                    <div class="keyboard-key">a</div>
                    <div class="keyboard-key">s</div>
                    <div class="keyboard-key">d</div>
                    <div class="keyboard-key">f</div>
                    <div class="keyboard-key">g</div>
                    <div class="keyboard-key">h</div>
                    <div class="keyboard-key">j</div>
                    <div class="keyboard-key">k</div>
                    <div class="keyboard-key">l</div>
                    <div class="keyboard-key">;</div>
                    <div class="keyboard-key">'</div>
                    <div class="keyboard-key">Enter</div>
                </div>
                <div class="keyboard-row">
                    <div class="keyboard-key shift">Shift</div>
                    <div class="keyboard-key">z</div>
                    <div class="keyboard-key">x</div>
                    <div class="keyboard-key">c</div>
                    <div class="keyboard-key">v</div>
                    <div class="keyboard-key">b</div>
                    <div class="keyboard-key">n</div>
                    <div class="keyboard-key">m</div>
                    <div class="keyboard-key">,</div>
                    <div class="keyboard-key">.</div>
                    <div class="keyboard-key">/</div>
                    <div class="keyboard-key shift">Shift</div>
                </div>
                <div class="keyboard-row">
                    <div class="keyboard-key space"></div>
                </div>
            </div>
        </div>
    </div>
    
    <footer>
        <p>&copy; 2025 Typing Master.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            initApp();
        });

        // Combined data and state variables
        const lessons = {
            beginner: {
                1: 'j j f f j f j j f f j f f j f',
                2: 'u u r r u r u u r r u r r u r',
                3: 'd d e e d e d d e e d e e d e',
                4: 'c c g g c g c c g g c g g c g',
                5: 'J J F F J F J J F F J F F J F'
            },
            intermediate: {
                1: 'the cat sat on the mat and went to the moon',
                2: 'this is a good word, like a very good word to type, and it should be easy.',
                3: 'The quick brown fox jumps over the lazy dog. But, this is not true. It is a sentence.',
                4: 'SHIFT JUMP SHIFT JUMP SHIFT JUMP SHIFT JUMP SHIFT JUMP SHIFT JUMP',
                5: 'This is a test to check if you can type very well.'
            },
            advanced: {
                1: 'The ethereal symphony echoed through the labyrinthine corridors, a cadence of whispers and murmurs that hinted at a forgotten past.',
                2: 'Artificial Intelligence, Machine Learning, and Neural Networks are transformative technologies.',
                3: 'printf("Hello, World!"); int main() { return 0; }',
                4: 'Mastering typing requires deliberate practice, focusing on both speed and accuracy.',
                5: 'This is an advanced test that you must complete to pass.'
            }
        };

        const testTexts = {
            '1-minute': 'The quick brown fox jumps over the lazy dog. The five boxing wizards jump quickly. Pack my box with five dozen liquor jugs. The job requires immense dedication and resilience. You must type with speed and accuracy to achieve a high score. Practice makes perfect, so keep typing. Stay calm and focused. This is a good test.',
            '3-minute': 'In the realm of digital communication, mastering typing skills is paramount for efficiency and productivity. A proficient typist can articulate thoughts and ideas seamlessly, without the friction of slow, deliberate key presses. The modern world moves at a rapid pace, and the ability to keep up with the flow of information is a valuable asset. This skill is not merely about speed; it is also about precision and accuracy. Errors can disrupt the rhythm of typing and detract from the clarity of the message. Therefore, a balanced approach is key. You should aim to type not just quickly, but correctly, building muscle memory that allows your fingers to find their way across the keyboard with minimal conscious effort. Regular practice is the cornerstone of improvement. Consistency is more important than intensity. Short, daily sessions can yield better long-term results than sporadic, marathon typing sessions. Engage with diverse content, from simple paragraphs to complex technical documents, to broaden your keyboarding fluency. Remember, every keystroke is a step toward mastery.',
            '5-minute': 'The digital landscape is a vast and ever-expanding frontier, where information flows like a river. Navigating this landscape requires a unique set of skills, and among the most fundamental is the ability to type effectively. It is the bridge between our thoughts and their digital representation, a process so common that its importance is often overlooked. However, for anyone who works with computers, from writers and programmers to students and data analysts, typing is the cornerstone of their daily operations. The quest for typing proficiency is a journey of patience and persistence. It begins with the basics: learning the home row, understanding proper finger placement, and striking each key with purpose. As you progress, you will encounter new challenges, such as mastering capital letters, punctuation, and special characters. The journey is marked by gradual increases in speed and accuracy, each small victory reinforcing your progress. To truly excel, you must embrace a mindset of continuous improvement. Pay attention to your errors, and use them as learning opportunities. The mistakes you make are not failures, but rather signposts pointing to areas that need more practice. They are clues that reveal the words or key combinations that trip you up. By addressing these weak spots, you strengthen your overall typing ability. In the end, becoming a typing master is not about achieving a specific WPM score. It is about reaching a state where typing becomes an intuitive extension of your mind, a seamless and effortless process that allows you to focus on the content of your thoughts, rather than the mechanics of putting them into words. This mastery frees you to create, communicate, and innovate with unparalleled ease and speed.'
        };
        const allLessons = {};
        Object.assign(allLessons, lessons);
        allLessons['tests'] = testTexts;

        // Combined state variables
        let currentLessonText = '';
        let currentLesson = 0;
        let currentLevel = 'beginner';
        let typedCharacters = '';
        let correctCharacters = 0;
        let startTime = 0;
        let lessonInterval = null;
        let problemKeys = {};
        let currentTestType = '';
        const historyTableBody = document.getElementById('history-table-body');
        let testHistory = JSON.parse(localStorage.getItem('typingTestHistory')) || [];

        // UI elements
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        const textDisplay = document.getElementById('text-display');
        const typingInput = document.getElementById('typing-input');
        const wpmDisplay = document.getElementById('wpm-display');
        const accuracyDisplay = document.getElementById('accuracy-display');
        const timerDisplay = document.getElementById('timer-display');
        const errorsDisplay = document.getElementById('errors-display');
        const finalWPM = document.getElementById('final-wpm');
        const finalAccuracy = document.getElementById('final-accuracy');
        const finalErrors = document.getElementById('final-errors');
        const resultDiv = document.getElementById('result');
        const problemKeysDisplay = document.getElementById('problem-keys-display');
        const typingLessonContainer = document.getElementById('typing-lesson');
        const startBtnLesson = document.getElementById('start-btn-lesson');
        const endBtnLesson = document.getElementById('end-btn-lesson');
        const lessonTitle = document.getElementById('lesson-title');
        const lessonDescription = document.getElementById('lesson-description');

        // Function to switch tabs
        function showTab(tabName) {
            tabs.forEach(tab => {
                tab.classList.remove('active');
                if (tab.getAttribute('data-tab') === tabName) {
                    tab.classList.add('active');
                }
            });

            tabContents.forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(tabName + '-content').classList.add('active');
            
            if (tabName === 'history') {
                loadTestHistory();
            }
        }
        
        // Tab click listeners
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const tabName = tab.getAttribute('data-tab');
                showTab(tabName);
            });
        });

        // Combined start function
        function startLesson(lesson, level) {
            currentLesson = lesson;
            currentLevel = level;
            currentLessonText = lessons[level][lesson];
            resetLesson();
            typingLessonContainer.style.display = 'block';
            document.querySelector('.tab-content.active').style.display = 'none';
            lessonTitle.textContent = `Lesson ${lesson}`;
            lessonDescription.textContent = `Typing ${level} lesson`;
            typingInput.focus();
        }

        function startTest(minutes, type) {
            currentTestType = type;
            currentLessonText = testTexts[type];
            resetLesson();
            typingLessonContainer.style.display = 'block';
            document.querySelector('.tab-content.active').style.display = 'none';
            lessonTitle.textContent = getTestTitle(type);
            lessonDescription.textContent = `A timed test of ${minutes} minutes`;
            typingInput.focus();
            startTimer(minutes);
        }

        function resetLesson() {
            typedCharacters = '';
            correctCharacters = 0;
            startTime = 0;
            problemKeys = {};
            clearInterval(lessonInterval);
            
            textDisplay.innerHTML = '';
            const words = currentLessonText.split(' ');
            words.forEach(word => {
                const wordSpan = document.createElement('span');
                word.split('').forEach(char => {
                    const charSpan = document.createElement('span');
                    charSpan.textContent = char;
                    wordSpan.appendChild(charSpan);
                });
                textDisplay.appendChild(wordSpan);
                textDisplay.appendChild(document.createTextNode(' '));
            });
            
            typingInput.value = '';
            typingInput.disabled = false;
            wpmDisplay.textContent = '0';
            accuracyDisplay.textContent = '0%';
            timerDisplay.textContent = '0s';
            errorsDisplay.textContent = '0';
            resultDiv.style.display = 'none';
            problemKeysDisplay.innerHTML = '';
            
            // Highlight first word
            const firstWord = textDisplay.querySelector('span');
            if (firstWord) {
                firstWord.classList.add('current-word');
            }
        }

        function getTestTitle(type) {
            switch(type) {
                case '1-minute': return '1-Minute Test';
                case '3-minute': return '3-Minute Test';
                case '5-minute': return '5-Minute Test';
                default: return 'Typing Test';
            }
        }

        function endLesson() {
            clearInterval(lessonInterval);
            typingInput.disabled = true;
            resultDiv.style.display = 'block';

            const totalTyped = typedCharacters.length;
            const finalWPMValue = calculateWPM();
            const finalAccuracyValue = calculateAccuracy();

            finalWPM.textContent = finalWPMValue;
            finalAccuracy.textContent = finalAccuracyValue + '%';
            finalErrors.textContent = Object.values(problemKeys).reduce((a, b) => a + b, 0);

            if (Object.keys(problemKeys).length > 0) {
                problemKeysDisplay.parentElement.style.display = 'block';
                for (const key in problemKeys) {
                    const keySpan = document.createElement('div');
                    keySpan.className = 'key';
                    keySpan.textContent = `${key}: ${problemKeys[key]}`;
                    problemKeysDisplay.appendChild(keySpan);
                }
            }
        }

        function startTimer(minutes) {
            let seconds = 0;
            lessonInterval = setInterval(() => {
                seconds++;
                timerDisplay.textContent = `${seconds}s`;
                if (minutes && seconds >= minutes * 60) {
                    endLesson();
                }
            }, 1000);
        }

        typingInput.addEventListener('input', (event) => {
            if (startTime === 0) {
                startTime = Date.now();
                lessonInterval = setInterval(updateStats, 1000);
            }

            const currentInput = typingInput.value;
            const currentText = currentLessonText;

            if (currentInput.length > typedCharacters.length) {
                // New character typed
                const lastChar = currentInput[currentInput.length - 1];
                const expectedChar = currentText[currentInput.length - 1];

                if (lastChar === expectedChar) {
                    correctCharacters++;
                } else {
                    if (problemKeys[expectedChar]) {
                        problemKeys[expectedChar]++;
                    } else {
                        problemKeys[expectedChar] = 1;
                    }
                }
            }
            
            typedCharacters = currentInput;
            
            let html = '';
            for (let i = 0; i < currentText.length; i++) {
                let char = currentText[i];
                let className = '';
                if (i < typedCharacters.length) {
                    className = (char === typedCharacters[i]) ? 'correct' : 'incorrect';
                }
                html += `<span class="${className}">${char}</span>`;
            }
            
            // This is a simplified display logic. A real app would need a more robust highlighting system.
            textDisplay.innerHTML = html;

            if (typedCharacters.length === currentText.length) {
                endLesson();
            }
        });

        function updateStats() {
            const timeElapsed = (Date.now() - startTime) / 1000;
            const wpm = calculateWPM(timeElapsed);
            const accuracy = calculateAccuracy();

            wpmDisplay.textContent = wpm;
            accuracyDisplay.textContent = accuracy + '%';
            timerDisplay.textContent = `${Math.floor(timeElapsed)}s`;
            errorsDisplay.textContent = Object.values(problemKeys).reduce((a, b) => a + b, 0);
        }

        function calculateWPM(timeElapsed) {
            if (timeElapsed <= 0) return 0;
            const wordsTyped = typedCharacters.split(' ').length;
            const wpm = (wordsTyped / timeElapsed) * 60;
            return Math.round(wpm);
        }

        function calculateAccuracy() {
            if (typedCharacters.length === 0) return 0;
            const accuracy = (correctCharacters / typedCharacters.length) * 100;
            return Math.round(accuracy);
        }

        startBtnLesson.addEventListener('click', () => {
            if (currentTestType) {
                startTest(currentTestType.match(/\d/)[0], currentTestType);
            } else {
                startLesson(currentLesson, currentLevel);
            }
        });
        
        endBtnLesson.addEventListener('click', () => {
            endLesson();
        });

        // Function to save and load history
        function saveTestHistory(wpm, accuracy, errors, elapsed) {
            const testResult = {
                date: new Date().toLocaleDateString(),
                type: getTestTitle(currentTestType),
                wpm: wpm,
                accuracy: accuracy,
                time: elapsed,
                errors: errors
            };
            
            testHistory.unshift(testResult);
            localStorage.setItem('typingTestHistory', JSON.stringify(testHistory));
            
            loadTestHistory();
        }
        
        function loadTestHistory() {
            historyTableBody.innerHTML = '';
            
            if (testHistory.length === 0) {
                historyTableBody.innerHTML = '<tr><td colspan="6" style="text-align: center;">No test results yet</td></tr>';
                return;
            }
            
            testHistory.forEach(result => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${result.date}</td>
                    <td>${result.type}</td>
                    <td>${result.wpm}</td>
                    <td>${result.accuracy}%</td>
                    <td>${result.time}s</td>
                    <td>${result.errors}</td>
                `;
                historyTableBody.appendChild(row);
            });
        }
    </script>
</body>
</html>
